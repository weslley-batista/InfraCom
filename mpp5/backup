#codigo configurado na maquina de weslley
import socket
from typing import ByteString
import threading

serverAddressPort = ('201.59.169.4', 50005) #colocar ip do servidor e porta, configurados no roteador-servidor (julio)
#serverAddressPort = ('45.166.51.58', 1317) #colocar ip do servidor e porta, configurados no roteador-servidor (pedro)

bufferSize = 1024
UDPClientSocket = socket.socket(family=socket.AF_INET, type=socket.SOCK_DGRAM)

def envia():
    countmsg = 0
    inputClient=""
    while (inputClient != 'quit'):
        while(True):
            countmsg = countmsg+1
            inputClient = input()
            msgFromClient = bytes(str(countmsg) +')'+inputClient, 'utf-8') 

            UDPClientSocket.sendto(msgFromClient, serverAddressPort)
            msgFromServer = UDPClientSocket.recvfrom(bufferSize)

            print("Message from server: {}".format(msgFromServer[0].decode('utf-8')))

send = threading.Thread(target=envia)
send.start()

#------
def recebe():
    while True:
        msgFromServer = UDPClientSocket.recvfrom(1024)
        print("Messagem do servidor: {}".format(msgFromServer[0].decode('utf-8')))

receber = threading.Thread(target=recebe)
receber.start()
